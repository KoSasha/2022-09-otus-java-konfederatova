# hw04-gc

ДЗ4. Сборщик мусора.

Определение нужного размера хипа.

До оптимизации:

 размер heap, Мб | время выполнения программы, с |
-----------------|-|
 256             | OutOfMemoryError |
 512             | 9 |
 1024            | 8 |
 2048            | 7 |
 4096            | 7 |

При выделении heap 256 Мб не хватает памяти для обьектов, создаваемых во время выполнения программы, из-за чего возникает OutOfMemoryError (ошибка переполнения/нехватки памяти). При выделении heap 512 Мб программа выполняется за самое оптимальное время при потребляемом размере памяти и работе сборщика мусора. При выделении heap 2048 Мб (2 Гб) время выполнения программы уменьшается, но при этом сборщик мусора запускается реже и тратит на сборку больше времени (это видно при анализе запуска через virtualvm).

После оптимизации:

Для оптимизации работы приложения и использования gc все приватные поля типа Integer в классах Data и Summator были заменены на примитивный тип int. Прирост скорости выполнения программы был получен за счет того, что с примитивными типами данных при выполнении программы не используется куча, что, соответственно, исключает и выполнение сборок мусора gc.

 размер heap, Мб | время выполнения программы, с |
-----------------|----|
 256             | 2  |
 512             | 1  |
 1024            | 1  |
 2048            | 1  |
 4096            | 1  |

При такой оптимизации при размере кучи 256 Мб приложение не падает с ошибкой переполнения памяти и время работы программы с увеличением памяти почти не меняется.
